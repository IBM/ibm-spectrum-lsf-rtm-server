<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Cacti â€“ RRDtool Specific Features</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="Cacti-Github.css" />
</head>
<body>
<h1 id="rrdtool-specific-features">RRDtool Specific Features</h1>
<p>Cacti supports most RRDtool features. In this chapter, many of those features, and some Cacti implementation specifics around them will be discussed. As RRDtool is a continually changing Times Series Database (TSDB) and <strong>Graph</strong> rendering framework, this guide may be a little behind on all the RRDtool features that Cacti supports.</p>
<h2 id="database-data-types">Database Data Types</h2>
<p>There are several different Database <strong>Data Types</strong> that RRDfile supports. They include all those listed below. Cacti claims to support all, but <code>COMPUTE</code> remains untested.</p>
<table>
<thead>
<tr class="header">
<th>Type</th>
<th>Supported</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>GAUGE</td>
<td>Yes</td>
<td>This is as the term refers to a floating point number that tracks the value reported directly. Unlike the COUNTER, it has not comprehension of past data.</td>
</tr>
<tr class="even">
<td>COUNTER</td>
<td>Yes</td>
<td>This is a floating point number that tracks the different between samples to come up with effectively a rate calculation. Used for things like Traffic Graphs where the number reported in SNMP continually increases</td>
</tr>
<tr class="odd">
<td>DCOUNTER</td>
<td>Yes</td>
<td>This is the same as a COUNTER, but in Double Precision.</td>
</tr>
<tr class="even">
<td>DERIVE</td>
<td>Yes</td>
<td>This data type measures the Rate of Change of a value, otherwise known as the first derivative to the value. As such, it relies on previous data in order to report the change.</td>
</tr>
<tr class="odd">
<td>DDERIVE</td>
<td>Yes</td>
<td>This is the same as the DERIVE, but in Double Precision</td>
</tr>
<tr class="even">
<td>ABSOLUTE</td>
<td>Yes</td>
<td>Is for counters that get reset upon reading. This is often used for fast counters. It is also similar to the DERIVE, or acts very much like it.</td>
</tr>
<tr class="odd">
<td>COMPUTE</td>
<td>Yes</td>
<td>Though Cacti claims to support this Data Type. It's not clear that it's presently working.</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>NOTE</strong>: Presently <code>Holt-Winters Forecasting</code> is not supported in Cacti and The Cacti Group has no plans on supporting it. If you would like <code>Holt-Winters Forecasting</code> supported in Cacti, you will need to submit a pull request including documentation if you require it's functionality.</p>
</blockquote>
<h2 id="gprint-presets">GPRINT Presets</h2>
<p>A GPRINT is a graph item type that enables you to print the values of data sources on a graph. They are typically used to represent legend values on the graph. The output format of these numbers are controlled by a printf-like format string. Cacti enables you to keep a global list of these strings that can be applied to any graph item throughout Cacti. You can see the list of available formats described on the <a href="https://oss.oetiker.ch/rrdtool/doc/rrdgraph_graph.en.html#PRINT">RRDtool Website</a>.</p>
<h3 id="creating-a-gprint-preset">Creating a GPRINT Preset</h3>
<p>To create a new GPRINT preset, select the Graph Management menu item under the Management heading, and select GPRINT Presets. Click Add to the right and you will be presented with an edit page containing two fields. Enter a name for your GPRINT preset, and the actual printf-like string in the GPRINT Text field. When you are finished, click the Create button to create your new GPRINT preset.</p>
<p>In the image below, you can see the default GPRINT Presets included in the base Cacti. These generally cover just about all use cases presently.</p>
<p><img src="images/gprint-presets-default.png" alt="Default Cacti GPRINT&#39;s" /></p>
<h2 id="cdefs">CDEF's</h2>
<p>CDEF's allow you to apply mathematical functions to graph data to alter output. The concept of a CDEF comes straight from RRDtool, and are written in reverse polish notation (RPN). For more information regarding the syntax of CDEF's, check out the <a href="https://oss.oetiker.ch/rrdtool/tut/cdeftutorial.en.html">CDEF tutorial</a>.</p>
<p>From the image below, you can see that Cacti provides a rich set of CDEF's out of the box. These CDEF's can be imported and exported and are globally assigned for portability.</p>
<p><img src="images/cdefs-default.png" alt="Default Cacti CDEF&#39;s" /></p>
<h3 id="creating-a-cdef">Creating a CDEF</h3>
<p>To create a new CDEF in Cacti, select CDEF's under <code>Console &gt; Presets</code> sub-menu section. Once at this screen, click Add to the right. You will be prompted for a CDEF name, for which you can type anything used to describe your CDEF. Click the Create button so you are redirected back to the edit page, now with an empty CDEF Items box. Construct your CDEF by adding an item for each element in the CDEF string, common types such as operators and functions are enumerated for your convenience. Below is a basic description of each CDEF item type. You can see from the image below that CDEF's follow a Reverse Polish Notation (RPN), which was a very popular way of computing back in the 70's and 80's when computing devices had much less memory. However, RPN is elegant in it's simplicity.</p>
<p><img src="images/cdefs-default-example.png" alt="Default Cacti CDEF Example" /></p>
<h6 id="table-19-1-cdef-item-types">Table 19-1. CDEF Item Types</h6>
<p>Cacti provides several CDEF Item Types to represent a <strong>Data Source</strong> in order to provide additional functionality. See below for the documentation. Cacti presently does not allow you to specify a VNAME for your DEFS, CDEF's and VDEF's, but instead uses a string pattern to assign them. You will have to take note of then when creating a <strong>Graph Template</strong>. Those Special Data Source types are documented below in the next few sections.</p>
<table>
<thead>
<tr class="header">
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Function</td>
<td>You can choose a CDEF function to use as the item. <a href="https://oss.oetiker.ch/rrdtool/doc/rrdgraph_data.en.html#CDEF">The RRDtool's graph manual</a> describes the purpose of each CDEF function.</td>
</tr>
<tr class="even">
<td>Operator</td>
<td>Just your standard math operators, including modulo (%).</td>
</tr>
<tr class="odd">
<td>Special Data Source</td>
<td>A special data source is basically a flag to tell Cacti to do some special processing when it encounters this CDEF item. The "Current Graph Item Data Source" type basically inserts the name of the data source that is referenced by the graph item that references to this CDEF. Both of the "All Data Sources" types insert a summation of all data sources used on a graph.</td>
</tr>
<tr class="even">
<td>Another CDEF</td>
<td>You can recursively use another CDEF within this CDEF.</td>
</tr>
<tr class="odd">
<td>Custom String</td>
<td>Sometimes it's just easier to type out the literal CDEF string manually. When referencing to data sources on the graph, remember that Cacti names them 'a', 'b', 'c', '...', starting with the first data source on the graph.</td>
</tr>
</tbody>
</table>
<h2 id="vdefs">VDEF's</h2>
<p>VDEF's provide greater functionality then their ancestor CDEF's and may be able to replace some legacy Cacti functionality like Nth Percentile <strong>Graph Template</strong> logic. They should be used whenever possible for your <strong>Graph Templates</strong>.</p>
<p>You can see from the image below, that 95th percentile and total bandwidth could be replace by using one of the VDEF's below.</p>
<p><img src="images/vdefs-default.png" alt="Default Cacti VDEF&#39;s" /></p>
<h3 id="creating-a-vdef">Creating a VDEF</h3>
<p>To create a new VDEF in Cacti, select VDEF's under <code>Console &gt; Presets</code> sub-menu section. Once at this screen, click Add to the right. You will be prompted for a VDEF name, for which you can type anything used to describe your VDEF. Click the Create button so you are redirected back to the edit page, now with an empty VDEF Items box. Construct your VDEF by adding an item for each element in the VDEF string, common types such as operators and functions are enumerated for your convenience. Below is a basic description of each VDEF item type. The image below shows an example VDEF for the Bandwidth type VDEF.</p>
<p><img src="images/vdefs-default-example.png" alt="Default Cacti VDEF Example" /></p>
<p>For additional information on CDEF's and VDEF's see that specific section of the documentation. Additionally, you can find examples on the <a href="https://oss.oetiker.ch/rrdtool/doc/rrdgraph_data.en.html#VDEF">RRDtool Website</a></p>
<h3 id="special-data-sources">Special Data Sources</h3>
<p>The Special Data Source selection introduces some variables not known to plain vanilla RRDtool. Let's spend some few words of them to unleash their power.</p>
<h6 id="table-19-2-cdef-special-data-source">Table 19-2. CDEF Special Data Source</h6>
<table>
<thead>
<tr class="header">
<th>Special Data Source</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Current Graph Item Data Source</td>
<td>Will be replaced by the DEF name of the RRDtool data source referred by the graph item this CDEF is associated to.</td>
</tr>
<tr class="even">
<td>All Data Sources (Don't Include Duplicates)</td>
<td>Will add up all data sources of the whole graph to form a total. A data source that appears more than once will be counted only once. Data sources that differ by consolidation functions only are NOT counted as different data sources (e.g. traffic_in:AVERAGE and traffic_in:MAX are counted only once). It is NOT required to associate the graph item to any data source!</td>
</tr>
<tr class="odd">
<td>All Data Sources (Include Duplicates)</td>
<td>Will add up all data sources of the whole graph to form a total. A data source that appears more than once will be counted for each time of it's appearance. Data sources that differ by consolidation functions only are NOT counted as different data sources (e.g. traffic_in:AVERAGE and traffic_in:MAX are counted only once). It is NOT required to associate the graph item to any data source!</td>
</tr>
<tr class="even">
<td>Similar Data Sources (Don't Include Duplicates)</td>
<td>It is REQUIRED to associate the graph item to the data source that shall be totaled! Let's assume the data source is named "traffic_in". Then, cacti will add up all data sources "traffic_in" of the whole graph to form a data source specific total (e.g. Total traffic In). Data sources with different consolidation functions are counted as same data sources (e.g. traffic_in:AVERAGE and traffic_in:MAX are counted once)</td>
</tr>
<tr class="odd">
<td>Similar Data Sources (Include Duplicates)</td>
<td>It is REQUIRED to associate the graph item to the data source that shall be totaled! If a data source appears multiple times, it will be added this many times.</td>
</tr>
<tr class="even">
<td>Current Data Source Item: Minimum Value</td>
<td>Taken from the Data Template - Data Source Item related to this graph item: fetches the minimum value defined for the given data template. Caution: This is NOT the smallest entry of the given data source!</td>
</tr>
<tr class="odd">
<td>Current Data Source Item: Maximum Value</td>
<td>Taken from the Data Template - Data Source Item related to this graph item: fetches the maximum value defined for the given data template. Caution: This is NOT the highest entry of the given data source!</td>
</tr>
<tr class="even">
<td>Graph: Lower Limit</td>
<td>Taken from the Graph Template: fetches the Lower Limit defined to the Graph Template. This is independent of all --alt-autoscaling options. It is NOT the dynamically determined lower boundary of the graph!</td>
</tr>
<tr class="odd">
<td>Graph: Upper Limit</td>
<td>Taken from the Graph Template: fetches the Upper Limit defined to the Graph Template. This is independent of all --alt-autoscaling options. It is NOT the dynamically determined upper boundary of the graph!</td>
</tr>
<tr class="even">
<td>Count of All Data Sources (Don't Include Duplicates)</td>
<td>Will count the number of all data sources of the whole graph. A data source that appears more than once will be counted only once. Data sources that differ by consolidation functions only are NOT counted as different data sources (e.g. traffic_in:AVERAGE and traffic_in:MAX are counted only once). It is NOT required to associate the graph item to any data source!</td>
</tr>
<tr class="odd">
<td>Count of All Data Sources (Include Duplicates)</td>
<td>Will count the number of all data sources of the whole graph. A data source that appears more than once will be counted for each time of it's appearance. Data sources that differ by consolidation functions only are NOT counted as different data sources (e.g. traffic_in:AVERAGE and traffic_in:MAX are counted only once). It is NOT required to associate the graph item to any data source!</td>
</tr>
<tr class="even">
<td>Count of Similar Data Sources (Don't Include Duplicates)</td>
<td>It is REQUIRED to associate the graph item to the data source that shall be counted! Let's assume the data source is named "traffic_in". Then, cacti will count all data sources "traffic_in" of the whole graph. Data sources with different consolidation functions are counted as same data sources (e.g. traffic_in:AVERAGE and traffic_in:MAX are counted once)</td>
</tr>
<tr class="odd">
<td>Count of Similar Data Sources (Include Duplicates)</td>
<td>It is REQUIRED to associate the graph item to the data source that shall be counted! If a data source appears multiple times, it will be counted this many times.</td>
</tr>
</tbody>
</table>
<p>While the <code>All Data Sources/Similar Data Sources</code> pseudo CDEF variables perform <em>totaling</em>, the <code>Count All Data Sources/Count Similar Data Sources</code> pseudo CDEF Variables simply <em>count</em> the occurrences of the related data sources. Thus, it is easy to compute e.g. an average of all similar data sources by creating the CDEF:</p>
<p><code>CDEF=SIMILAR_DATA_SOURCES_NODUPS,COUNT_SIMILAR_DS_NODUPS,/</code></p>
<h3 id="using-special-data-source">Using Special Data Source</h3>
<p>Let's have some examples:</p>
<p>This is the list of graph items defined. Please note, that Item numbers 17-20 are duplicates of Item numbers 1-4. Even if it usually does not make sense, for this discussion it is very valuable. Item numbers 21-24 are related to a <code>cdef=ALL_DATA_SOURCES_NODUPS</code>.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Graph Item</th>
<th style="text-align: left;">Data Source</th>
<th style="text-align: right;">Graph Item Type</th>
<th style="text-align: right;">CF Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Item # 1</td>
<td style="text-align: left;">(traffic_in): 1. Target Traffic In</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 2</td>
<td style="text-align: left;">(traffic_in): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 3</td>
<td style="text-align: left;">(traffic_in): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 4</td>
<td style="text-align: left;">(traffic_in): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 5</td>
<td style="text-align: left;">(traffic_in): 2. Target Traffic In</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 6</td>
<td style="text-align: left;">(traffic_in): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 7</td>
<td style="text-align: left;">(traffic_in): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 8</td>
<td style="text-align: left;">(traffic_in): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 9</td>
<td style="text-align: left;">(traffic_out): 1. Target Traffic Out</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 10</td>
<td style="text-align: left;">(traffic_out): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 11</td>
<td style="text-align: left;">(traffic_out): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 12</td>
<td style="text-align: left;">(traffic_out): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 13</td>
<td style="text-align: left;">(traffic_out): 2. Target Traffic Out</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 14</td>
<td style="text-align: left;">(traffic_out): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 15</td>
<td style="text-align: left;">(traffic_out): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 16</td>
<td style="text-align: left;">(traffic_out): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 17</td>
<td style="text-align: left;">(traffic_in): 1. Target Again Traffic In</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 18</td>
<td style="text-align: left;">(traffic_in): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 19</td>
<td style="text-align: left;">(traffic_in): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 20</td>
<td style="text-align: left;">(traffic_in): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 21</td>
<td style="text-align: left;">(No Task): AllDsNoDups</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 22</td>
<td style="text-align: left;">(No Task): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 23</td>
<td style="text-align: left;">(No Task): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 24</td>
<td style="text-align: left;">(No Task): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
</tbody>
</table>
<p>And this is the rrd graph statement:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">/usr/bin/rrdtool</span> graph - \</a>
<a class="sourceLine" id="cb1-2" title="2">--imgformat=PNG \</a>
<a class="sourceLine" id="cb1-3" title="3">--start=-86400 \</a>
<a class="sourceLine" id="cb1-4" title="4">--end=-300 \</a>
<a class="sourceLine" id="cb1-5" title="5">--title=<span class="st">&quot;Traffic AllDsNoDups&quot;</span> \</a>
<a class="sourceLine" id="cb1-6" title="6">--base=1000 \</a>
<a class="sourceLine" id="cb1-7" title="7">--height=120 \</a>
<a class="sourceLine" id="cb1-8" title="8">--width=500 \</a>
<a class="sourceLine" id="cb1-9" title="9">--alt-autoscale-max \</a>
<a class="sourceLine" id="cb1-10" title="10">--lower-limit=0 \</a>
<a class="sourceLine" id="cb1-11" title="11">--vertical-label=<span class="st">&quot;&quot;</span> \</a>
<a class="sourceLine" id="cb1-12" title="12">--slope-mode \</a>
<a class="sourceLine" id="cb1-13" title="13">--font TITLE:12: \</a>
<a class="sourceLine" id="cb1-14" title="14">--font AXIS:8: \</a>
<a class="sourceLine" id="cb1-15" title="15">--font LEGEND:8: \</a>
<a class="sourceLine" id="cb1-16" title="16">--font UNIT:8: \</a>
<a class="sourceLine" id="cb1-17" title="17">DEF:a=<span class="st">&quot;/var/www/html/cacti/rra/target1_traffic_in_235.rrd&quot;</span>:traffic_in:AVERAGE \</a>
<a class="sourceLine" id="cb1-18" title="18">DEF:b=<span class="st">&quot;/var/www/html/cacti/rra/target1_traffic_in_235.rrd&quot;</span>:traffic_in:MAX \</a>
<a class="sourceLine" id="cb1-19" title="19">DEF:c=<span class="st">&quot;/var/www/html/cacti/rra/target2_traffic_in_8.rrd&quot;</span>:traffic_in:AVERAGE \</a>
<a class="sourceLine" id="cb1-20" title="20">DEF:d=<span class="st">&quot;/var/www/html/cacti/rra/target2_traffic_in_8.rrd&quot;</span>:traffic_in:MAX \</a>
<a class="sourceLine" id="cb1-21" title="21">DEF:e=<span class="st">&quot;/var/www/html/cacti/rra/target1_traffic_in_235.rrd&quot;</span>:traffic_out:AVERAGE \</a>
<a class="sourceLine" id="cb1-22" title="22">DEF:f=<span class="st">&quot;/var/www/html/cacti/rra/target1_traffic_in_235.rrd&quot;</span>:traffic_out:MAX \</a>
<a class="sourceLine" id="cb1-23" title="23">DEF:g=<span class="st">&quot;/var/www/html/cacti/rra/target2_traffic_in_8.rrd&quot;</span>:traffic_out:AVERAGE \</a>
<a class="sourceLine" id="cb1-24" title="24">DEF:h=<span class="st">&quot;/var/www/html/cacti/rra/target2_traffic_in_8.rrd&quot;</span>:traffic_out:MAX \</a>
<a class="sourceLine" id="cb1-25" title="25">CDEF:cdefca=TIME,1202925514,GT,a,a,UN,0,a,IF,IF,TIME,1202925514,GT,c,c,UN,0,c,IF,IF,TIME,1202925514,GT,e,e,UN,0,e,IF,IF,TIME,1202925514,GT,g,g,UN,0,g,IF,IF,+,+, \</a>
<a class="sourceLine" id="cb1-26" title="26">LINE1:a#FFFF00FF:<span class="st">&quot;1. Target Traffic In&quot;</span> \</a>
<a class="sourceLine" id="cb1-27" title="27">GPRINT:a:LAST:<span class="st">&quot;   Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb1-28" title="28">GPRINT:a:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb1-29" title="29">GPRINT:b:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span> \</a>
<a class="sourceLine" id="cb1-30" title="30">LINE1:c#FFD660FF:<span class="st">&quot;2. Target Traffic In&quot;</span> \</a>
<a class="sourceLine" id="cb1-31" title="31">GPRINT:c:LAST:<span class="st">&quot;     Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb1-32" title="32">GPRINT:c:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb1-33" title="33">GPRINT:d:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span> \</a>
<a class="sourceLine" id="cb1-34" title="34">LINE1:e#CAF100FF:<span class="st">&quot;1. Target Traffic Out&quot;</span> \</a>
<a class="sourceLine" id="cb1-35" title="35">GPRINT:e:LAST:<span class="st">&quot;   Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb1-36" title="36">GPRINT:e:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb1-37" title="37">GPRINT:f:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span> \</a>
<a class="sourceLine" id="cb1-38" title="38">LINE1:g#CCBB00FF:<span class="st">&quot;2. Target Traffic Out&quot;</span> \</a>
<a class="sourceLine" id="cb1-39" title="39">GPRINT:g:LAST:<span class="st">&quot;     Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb1-40" title="40">GPRINT:g:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb1-41" title="41">GPRINT:h:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span> \</a>
<a class="sourceLine" id="cb1-42" title="42">LINE1:a#FF0000FF:<span class="st">&quot;1. Target Again Traffic In&quot;</span> \</a>
<a class="sourceLine" id="cb1-43" title="43">GPRINT:a:LAST:<span class="st">&quot;Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb1-44" title="44">GPRINT:a:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb1-45" title="45">GPRINT:b:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span> \</a>
<a class="sourceLine" id="cb1-46" title="46">LINE1:cdefca#000000FF:<span class="st">&quot;AllDsNoDups&quot;</span> \</a>
<a class="sourceLine" id="cb1-47" title="47">GPRINT:cdefca:LAST:<span class="st">&quot;        Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb1-48" title="48">GPRINT:cdefca:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb1-49" title="49">GPRINT:cdefca:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span></a></code></pre></div>
<p>The data sources are denoted by the letters <code>a</code> to <code>h</code>. <code>cdefca</code> represents the important part. You surely notice, that all data sources using consolidation function <code>AVERAGE</code> are taken into account while <code>MAX</code> is skipped. Please pay attention to the data source denoted by <code>a</code>. Even though the data source appears twice, the cdef shows it only once. This is due to the duplicate suppression.</p>
<p>This is the list of graph items defined. Please note, that Item numbers 17-20 are duplicates of Item numbers 1-4. Even if it usually does not make sense, for this discussion it is very valuable. Item numbers 21-24 are related to a <code>cdef=ALL_DATA_SOURCES_DUPS</code></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Graph Item</th>
<th style="text-align: left;">Data Source</th>
<th style="text-align: right;">Graph Item Type</th>
<th style="text-align: right;">CF Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Item # 1</td>
<td style="text-align: left;">(traffic_in): 1. Target Traffic In</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 2</td>
<td style="text-align: left;">(traffic_in): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 3</td>
<td style="text-align: left;">(traffic_in): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 4</td>
<td style="text-align: left;">(traffic_in): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 5</td>
<td style="text-align: left;">(traffic_in): 2. Target Traffic In</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 6</td>
<td style="text-align: left;">(traffic_in): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 7</td>
<td style="text-align: left;">(traffic_in): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 8</td>
<td style="text-align: left;">(traffic_in): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 9</td>
<td style="text-align: left;">(traffic_out): 1. Target Traffic Out</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 10</td>
<td style="text-align: left;">(traffic_out): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 11</td>
<td style="text-align: left;">(traffic_out): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 12</td>
<td style="text-align: left;">(traffic_out): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 13</td>
<td style="text-align: left;">(traffic_out): 2. Target Traffic Out</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 14</td>
<td style="text-align: left;">(traffic_out): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 15</td>
<td style="text-align: left;">(traffic_out): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 16</td>
<td style="text-align: left;">(traffic_out): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 17</td>
<td style="text-align: left;">(traffic_in): 1. Target Again Traffic In</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 18</td>
<td style="text-align: left;">(traffic_in): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 19</td>
<td style="text-align: left;">(traffic_in): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 20</td>
<td style="text-align: left;">(traffic_in): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 21</td>
<td style="text-align: left;">(No Task): AllDsDups</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 22</td>
<td style="text-align: left;">(No Task): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 23</td>
<td style="text-align: left;">(No Task): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 24</td>
<td style="text-align: left;">(No Task): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
</tbody>
</table>
<p>And this is the rrd graph statement:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="ex">/usr/bin/rrdtool</span> graph - \</a>
<a class="sourceLine" id="cb2-2" title="2">--imgformat=PNG \</a>
<a class="sourceLine" id="cb2-3" title="3">--start=-86400 \</a>
<a class="sourceLine" id="cb2-4" title="4">--end=-300 \</a>
<a class="sourceLine" id="cb2-5" title="5">--title=<span class="st">&quot;Traffic AllDsDups&quot;</span> \</a>
<a class="sourceLine" id="cb2-6" title="6">--base=1000 \</a>
<a class="sourceLine" id="cb2-7" title="7">--height=120 \</a>
<a class="sourceLine" id="cb2-8" title="8">--width=500 \</a>
<a class="sourceLine" id="cb2-9" title="9">--alt-autoscale-max \</a>
<a class="sourceLine" id="cb2-10" title="10">--lower-limit=0 \</a>
<a class="sourceLine" id="cb2-11" title="11">--vertical-label=<span class="st">&quot;&quot;</span> \</a>
<a class="sourceLine" id="cb2-12" title="12">--slope-mode \</a>
<a class="sourceLine" id="cb2-13" title="13">--font TITLE:12: \</a>
<a class="sourceLine" id="cb2-14" title="14">--font AXIS:8: \</a>
<a class="sourceLine" id="cb2-15" title="15">--font LEGEND:8: \</a>
<a class="sourceLine" id="cb2-16" title="16">--font UNIT:8: \</a>
<a class="sourceLine" id="cb2-17" title="17">DEF:a=<span class="st">&quot;/var/www/html/cacti/rra/target1_traffic_in_235.rrd&quot;</span>:traffic_in:AVERAGE \</a>
<a class="sourceLine" id="cb2-18" title="18">DEF:b=<span class="st">&quot;/var/www/html/cacti/rra/target1_traffic_in_235.rrd&quot;</span>:traffic_in:MAX \</a>
<a class="sourceLine" id="cb2-19" title="19">DEF:c=<span class="st">&quot;/var/www/html/cacti/rra/target2_traffic_in_8.rrd&quot;</span>:traffic_in:AVERAGE \</a>
<a class="sourceLine" id="cb2-20" title="20">DEF:d=<span class="st">&quot;/var/www/html/cacti/rra/target2_traffic_in_8.rrd&quot;</span>:traffic_in:MAX \</a>
<a class="sourceLine" id="cb2-21" title="21">DEF:e=<span class="st">&quot;/var/www/html/cacti/rra/target1_traffic_in_235.rrd&quot;</span>:traffic_out:AVERAGE \</a>
<a class="sourceLine" id="cb2-22" title="22">DEF:f=<span class="st">&quot;/var/www/html/cacti/rra/target1_traffic_in_235.rrd&quot;</span>:traffic_out:MAX \</a>
<a class="sourceLine" id="cb2-23" title="23">DEF:g=<span class="st">&quot;/var/www/html/cacti/rra/target2_traffic_in_8.rrd&quot;</span>:traffic_out:AVERAGE \</a>
<a class="sourceLine" id="cb2-24" title="24">DEF:h=<span class="st">&quot;/var/www/html/cacti/rra/target2_traffic_in_8.rrd&quot;</span>:traffic_out:MAX \</a>
<a class="sourceLine" id="cb2-25" title="25">CDEF:cdefca=TIME,1202925583,GT,a,a,UN,0,a,IF,IF,TIME,1202925583,GT,c,c,UN,0,c,IF,IF,TIME,1202925583,GT,e,e,UN,0,e,IF,IF,TIME,1202925583,GT,g,g,UN,0,g,IF,IF,TIME,1202925583,GT,a,a,UN,0,a,IF,IF,+,+,+,+ \</a>
<a class="sourceLine" id="cb2-26" title="26">LINE1:a#FFFF00FF:<span class="st">&quot;1. Target Traffic In&quot;</span> \</a>
<a class="sourceLine" id="cb2-27" title="27">GPRINT:a:LAST:<span class="st">&quot;      Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb2-28" title="28">GPRINT:a:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb2-29" title="29">GPRINT:b:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span> \</a>
<a class="sourceLine" id="cb2-30" title="30">LINE1:c#FFD660FF:<span class="st">&quot;2. Target Traffic In&quot;</span> \</a>
<a class="sourceLine" id="cb2-31" title="31">GPRINT:c:LAST:<span class="st">&quot;      Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb2-32" title="32">GPRINT:c:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb2-33" title="33">GPRINT:d:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span> \</a>
<a class="sourceLine" id="cb2-34" title="34">LINE1:e#CAF100FF:<span class="st">&quot;1. Target Traffic Out&quot;</span> \</a>
<a class="sourceLine" id="cb2-35" title="35">GPRINT:e:LAST:<span class="st">&quot;     Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb2-36" title="36">GPRINT:e:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb2-37" title="37">GPRINT:f:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span> \</a>
<a class="sourceLine" id="cb2-38" title="38">LINE1:g#CCBB00FF:<span class="st">&quot;2. Target Traffic Out&quot;</span> \</a>
<a class="sourceLine" id="cb2-39" title="39">GPRINT:g:LAST:<span class="st">&quot;     Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb2-40" title="40">GPRINT:g:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb2-41" title="41">GPRINT:h:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span> \</a>
<a class="sourceLine" id="cb2-42" title="42">LINE1:a#FF0000FF:<span class="st">&quot;1. Target Again Traffic In&quot;</span> \</a>
<a class="sourceLine" id="cb2-43" title="43">GPRINT:a:LAST:<span class="st">&quot;Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb2-44" title="44">GPRINT:a:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb2-45" title="45">GPRINT:b:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span> \</a>
<a class="sourceLine" id="cb2-46" title="46">LINE1:cdefca#000000FF:<span class="st">&quot;AllDsDups&quot;</span> \</a>
<a class="sourceLine" id="cb2-47" title="47">GPRINT:cdefca:LAST:<span class="st">&quot;             Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb2-48" title="48">GPRINT:cdefca:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb2-49" title="49">GPRINT:cdefca:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span></a></code></pre></div>
<p>Again, the data sources are denoted by the letters <code>a</code> to <code>h</code> and <code>cdefca</code> represents the important part. Please pay attention to the data source denoted by <code>a</code> appearing twice in this cdef. This is, because it appears twice (Item numbers 17-20) in the graph item list and duplicate suppression is not in effect.</p>
<p>Everything is very much like the above; again Item numbers 17-20 are duplicates of Item numbers 1-4. Item numbers 21-24 are related to a <code>cdef=SIMILAR_DATA_SOURCES_NODUPS</code> and are associated with the data source <code>traffic_in</code> of the <code>1</code>. target (it does not matter, which target is chosen, as long as you only choose a <code>traffic_in</code> data source)</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Graph Item</th>
<th style="text-align: left;">Data Source</th>
<th style="text-align: right;">Graph Item Type</th>
<th style="text-align: right;">CF Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Item # 1</td>
<td style="text-align: left;">(traffic_in): 1. Target Traffic In</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 2</td>
<td style="text-align: left;">(traffic_in): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 3</td>
<td style="text-align: left;">(traffic_in): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 4</td>
<td style="text-align: left;">(traffic_in): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 5</td>
<td style="text-align: left;">(traffic_in): 2. Target Traffic In</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 6</td>
<td style="text-align: left;">(traffic_in): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 7</td>
<td style="text-align: left;">(traffic_in): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 8</td>
<td style="text-align: left;">(traffic_in): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 9</td>
<td style="text-align: left;">(traffic_out): 1. Target Traffic Out</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 10</td>
<td style="text-align: left;">(traffic_out): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 11</td>
<td style="text-align: left;">(traffic_out): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 12</td>
<td style="text-align: left;">(traffic_out): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 13</td>
<td style="text-align: left;">(traffic_out): 2. Target Traffic Out</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 14</td>
<td style="text-align: left;">(traffic_out): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 15</td>
<td style="text-align: left;">(traffic_out): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 16</td>
<td style="text-align: left;">(traffic_out): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 17</td>
<td style="text-align: left;">(traffic_in): 1. Target Again Traffic In</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 18</td>
<td style="text-align: left;">(traffic_in): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 19</td>
<td style="text-align: left;">(traffic_in): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 20</td>
<td style="text-align: left;">(traffic_in): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 21</td>
<td style="text-align: left;">(traffic_in): SimilarDsNoDups</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 22</td>
<td style="text-align: left;">(traffic_in): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 23</td>
<td style="text-align: left;">(traffic_in): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 24</td>
<td style="text-align: left;">(traffic_in): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
</tbody>
</table>
<p>And this is the rrd graph statement:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1"><span class="ex">/usr/bin/rrdtool</span> graph - \</a>
<a class="sourceLine" id="cb3-2" title="2">--imgformat=PNG \</a>
<a class="sourceLine" id="cb3-3" title="3">--start=-86400 \</a>
<a class="sourceLine" id="cb3-4" title="4">--end=-300 \</a>
<a class="sourceLine" id="cb3-5" title="5">--title=<span class="st">&quot;Traffic SimilarDsNoDups&quot;</span> \</a>
<a class="sourceLine" id="cb3-6" title="6">--base=1000 \</a>
<a class="sourceLine" id="cb3-7" title="7">--height=120 \</a>
<a class="sourceLine" id="cb3-8" title="8">--width=500 \</a>
<a class="sourceLine" id="cb3-9" title="9">--alt-autoscale-max \</a>
<a class="sourceLine" id="cb3-10" title="10">--lower-limit=0 \</a>
<a class="sourceLine" id="cb3-11" title="11">--vertical-label=<span class="st">&quot;&quot;</span> \</a>
<a class="sourceLine" id="cb3-12" title="12">--slope-mode \</a>
<a class="sourceLine" id="cb3-13" title="13">--font TITLE:12: \</a>
<a class="sourceLine" id="cb3-14" title="14">--font AXIS:8: \</a>
<a class="sourceLine" id="cb3-15" title="15">--font LEGEND:8: \</a>
<a class="sourceLine" id="cb3-16" title="16">--font UNIT:8: \</a>
<a class="sourceLine" id="cb3-17" title="17">DEF:a=<span class="st">&quot;/var/www/html/cacti/rra/target1_traffic_in_235.rrd&quot;</span>:traffic_in:AVERAGE \</a>
<a class="sourceLine" id="cb3-18" title="18">DEF:b=<span class="st">&quot;/var/www/html/cacti/rra/target1_traffic_in_235.rrd&quot;</span>:traffic_in:MAX \</a>
<a class="sourceLine" id="cb3-19" title="19">DEF:c=<span class="st">&quot;/var/www/html/cacti/rra/target2_traffic_in_8.rrd&quot;</span>:traffic_in:AVERAGE \</a>
<a class="sourceLine" id="cb3-20" title="20">DEF:d=<span class="st">&quot;/var/www/html/cacti/rra/target2_traffic_in_8.rrd&quot;</span>:traffic_in:MAX \</a>
<a class="sourceLine" id="cb3-21" title="21">DEF:e=<span class="st">&quot;/var/www/html/cacti/rra/target1_traffic_in_235.rrd&quot;</span>:traffic_out:AVERAGE \</a>
<a class="sourceLine" id="cb3-22" title="22">DEF:f=<span class="st">&quot;/var/www/html/cacti/rra/target1_traffic_in_235.rrd&quot;</span>:traffic_out:MAX \</a>
<a class="sourceLine" id="cb3-23" title="23">DEF:g=<span class="st">&quot;/var/www/html/cacti/rra/target2_traffic_in_8.rrd&quot;</span>:traffic_out:AVERAGE \</a>
<a class="sourceLine" id="cb3-24" title="24">DEF:h=<span class="st">&quot;/var/www/html/cacti/rra/target2_traffic_in_8.rrd&quot;</span>:traffic_out:MAX \</a>
<a class="sourceLine" id="cb3-25" title="25">CDEF:cdefca=TIME,1202924474,GT,a,a,UN,0,a,IF,IF,TIME,1202924474,GT,c,c,UN,0,c,IF,IF,+ \</a>
<a class="sourceLine" id="cb3-26" title="26">CDEF:cdefcd=TIME,1202924474,GT,b,b,UN,0,b,IF,IF,TIME,1202924474,GT,d,d,UN,0,d,IF,IF,+ \</a>
<a class="sourceLine" id="cb3-27" title="27">LINE1:a#FFFF00FF:<span class="st">&quot;1. Target Traffic In&quot;</span> \</a>
<a class="sourceLine" id="cb3-28" title="28">GPRINT:a:LAST:<span class="st">&quot;    Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb3-29" title="29">GPRINT:a:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb3-30" title="30">GPRINT:b:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span> \</a>
<a class="sourceLine" id="cb3-31" title="31">LINE1:c#FFD660FF:<span class="st">&quot;2. Target Traffic In&quot;</span> \</a>
<a class="sourceLine" id="cb3-32" title="32">GPRINT:c:LAST:<span class="st">&quot;      Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb3-33" title="33">GPRINT:c:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb3-34" title="34">GPRINT:d:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span> \</a>
<a class="sourceLine" id="cb3-35" title="35">LINE1:e#CAF100FF:<span class="st">&quot;1. Target Traffic Out&quot;</span> \</a>
<a class="sourceLine" id="cb3-36" title="36">GPRINT:e:LAST:<span class="st">&quot; \</span></a>
<a class="sourceLine" id="cb3-37" title="37"><span class="st">Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb3-38" title="38">GPRINT:e:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb3-39" title="39">GPRINT:f:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span> \</a>
<a class="sourceLine" id="cb3-40" title="40">LINE1:g#CCBB00FF:<span class="st">&quot;2. Target Traffic Out&quot;</span> \</a>
<a class="sourceLine" id="cb3-41" title="41">GPRINT:g:LAST:<span class="st">&quot;     Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb3-42" title="42">GPRINT:g:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb3-43" title="43">GPRINT:h:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span> \</a>
<a class="sourceLine" id="cb3-44" title="44">LINE1:a#FF0000FF:<span class="st">&quot;1. Target Again Traffic In&quot;</span> \</a>
<a class="sourceLine" id="cb3-45" title="45">GPRINT:a:LAST:<span class="st">&quot;Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb3-46" title="46">GPRINT:a:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb3-47" title="47">GPRINT:b:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span> \</a>
<a class="sourceLine" id="cb3-48" title="48">LINE1:cdefca#000000FF:<span class="st">&quot;SimilarDsNoDups&quot;</span> \</a>
<a class="sourceLine" id="cb3-49" title="49">GPRINT:cdefca:LAST:<span class="st">&quot;           Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb3-50" title="50">GPRINT:cdefca:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb3-51" title="51">GPRINT:cdefcd:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span></a></code></pre></div>
<p><code>cdefca</code> calculates the <code>SUM</code> of <code>all traffic_in</code> data sources, but pays attention only to consolidation function <code>AVERAGE</code>. Duplicate suppression makes sure, that the second occurrence of the <code>1</code>. target is not taken into account. So it's only summing data source <code>a</code> and <code>c</code>. <code>cdefca</code> is used the the <code>LINE1</code> graph item with exact match for consolidation function <code>AVERAGE</code> as well as for the best matched consolidation functions <code>LAST</code> and <code>MIN</code>.</p>
<p><code>cdefcd</code> calculates the <code>SUM</code> of all <code>traffic_in</code> data sources, but pays attention only to consolidation function <code>MAX</code>. Again, duplicate suppression is in effect. So it's only summing data source <code>b</code> and <code>d</code>. <code>cdefcd</code> is used for the graph item with exact match for consolidation function <code>MAX</code> only. This is, because my rra settings only define <code>AVERAGE</code> and <code>MAX</code>, where <code>LAST</code> and <code>MIN</code> are omitted. This may differ for installations defining <code>LAST</code> and <code>MIN</code> as well.</p>
<p>Again, please note, that Item numbers 17-20 are duplicates of Item numbers 1-4. Item numbers 21-24 are related to a <code>cdef=SIMILAR_DATA_SOURCES_DUPS</code> and are associated with the data source <code>traffic_in</code> of the <code>1</code> target (it does not matter, which target is chosen, as long as you only choose a <code>traffic_in</code> data source)</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Graph Item</th>
<th style="text-align: left;">Data Source</th>
<th style="text-align: right;">Graph Item Type</th>
<th style="text-align: right;">CF Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Item # 1</td>
<td style="text-align: left;">(traffic_in): 1. Target Traffic In</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 2</td>
<td style="text-align: left;">(traffic_in): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 3</td>
<td style="text-align: left;">(traffic_in): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 4</td>
<td style="text-align: left;">(traffic_in): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 5</td>
<td style="text-align: left;">(traffic_in): 2. Target Traffic In</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 6</td>
<td style="text-align: left;">(traffic_in): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 7</td>
<td style="text-align: left;">(traffic_in): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 8</td>
<td style="text-align: left;">(traffic_in): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 9</td>
<td style="text-align: left;">(traffic_out): 1. Target Traffic Out</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 10</td>
<td style="text-align: left;">(traffic_out): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 11</td>
<td style="text-align: left;">(traffic_out): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 12</td>
<td style="text-align: left;">(traffic_out): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 13</td>
<td style="text-align: left;">(traffic_out): 2. Target Traffic Out</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 14</td>
<td style="text-align: left;">(traffic_out): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 15</td>
<td style="text-align: left;">(traffic_out): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 16</td>
<td style="text-align: left;">(traffic_out): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 17</td>
<td style="text-align: left;">(traffic_in): 1. Target Again Traffic In</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 18</td>
<td style="text-align: left;">(traffic_in): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 19</td>
<td style="text-align: left;">(traffic_in): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 20</td>
<td style="text-align: left;">(traffic_in): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 21</td>
<td style="text-align: left;">(traffic_in): SimilarDsDups</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 22</td>
<td style="text-align: left;">(traffic_in): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 23</td>
<td style="text-align: left;">(traffic_in): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 24</td>
<td style="text-align: left;">(traffic_in): Maximum:[HR]</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
</tr>
</tbody>
</table>
<p>And this is the rrd graph statement:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" title="1"><span class="ex">/usr/bin/rrdtool</span> graph - \</a>
<a class="sourceLine" id="cb4-2" title="2">--imgformat=PNG \</a>
<a class="sourceLine" id="cb4-3" title="3">--start=-86400 \</a>
<a class="sourceLine" id="cb4-4" title="4">--end=-300 \</a>
<a class="sourceLine" id="cb4-5" title="5">--title=<span class="st">&quot;Traffic SimilarDsDups&quot;</span> \</a>
<a class="sourceLine" id="cb4-6" title="6">--base=1000 \</a>
<a class="sourceLine" id="cb4-7" title="7">--height=120 \</a>
<a class="sourceLine" id="cb4-8" title="8">--width=500 \</a>
<a class="sourceLine" id="cb4-9" title="9">--alt-autoscale-max \</a>
<a class="sourceLine" id="cb4-10" title="10">--lower-limit=0 \</a>
<a class="sourceLine" id="cb4-11" title="11">--vertical-label=<span class="st">&quot;&quot;</span> \</a>
<a class="sourceLine" id="cb4-12" title="12">--slope-mode \</a>
<a class="sourceLine" id="cb4-13" title="13">--font TITLE:12: \</a>
<a class="sourceLine" id="cb4-14" title="14">--font AXIS:8: \</a>
<a class="sourceLine" id="cb4-15" title="15">--font LEGEND:8: \</a>
<a class="sourceLine" id="cb4-16" title="16">--font UNIT:8: \</a>
<a class="sourceLine" id="cb4-17" title="17">DEF:a=<span class="st">&quot;/var/www/html/cacti/rra/target1_traffic_in_235.rrd&quot;</span>:traffic_in:AVERAGE \</a>
<a class="sourceLine" id="cb4-18" title="18">DEF:b=<span class="st">&quot;/var/www/html/cacti/rra/target1_traffic_in_235.rrd&quot;</span>:traffic_in:MAX \</a>
<a class="sourceLine" id="cb4-19" title="19">DEF:c=<span class="st">&quot;/var/www/html/cacti/rra/target2_traffic_in_8.rrd&quot;</span>:traffic_in:AVERAGE \</a>
<a class="sourceLine" id="cb4-20" title="20">DEF:d=<span class="st">&quot;/var/www/html/cacti/rra/target2_traffic_in_8.rrd&quot;</span>:traffic_in:MAX \</a>
<a class="sourceLine" id="cb4-21" title="21">DEF:e=<span class="st">&quot;/var/www/html/cacti/rra/target1_traffic_in_235.rrd&quot;</span>:traffic_out:AVERAGE \</a>
<a class="sourceLine" id="cb4-22" title="22">DEF:f=<span class="st">&quot;/var/www/html/cacti/rra/target1_traffic_in_235.rrd&quot;</span>:traffic_out:MAX \</a>
<a class="sourceLine" id="cb4-23" title="23">DEF:g=<span class="st">&quot;/var/www/html/cacti/rra/target2_traffic_in_8.rrd&quot;</span>:traffic_out:AVERAGE \</a>
<a class="sourceLine" id="cb4-24" title="24">DEF:h=<span class="st">&quot;/var/www/html/cacti/rra/target2_traffic_in_8.rrd&quot;</span>:traffic_out:MAX \</a>
<a class="sourceLine" id="cb4-25" title="25">CDEF:cdefca=TIME,1202925634,GT,a,a,UN,0,a,IF,IF,TIME,1202925634,GT,c,c,UN,0,c,IF,IF,TIME,1202925634,GT,a,a,UN,0,a,IF,IF,+,+ \</a>
<a class="sourceLine" id="cb4-26" title="26">CDEF:cdefcd=TIME,1202925634,GT,b,b,UN,0,b,IF,IF,TIME,1202925634,GT,d,d,UN,0,d,IF,IF,TIME,1202925634,GT,b,b,UN,0,b,IF,IF,+,+ \</a>
<a class="sourceLine" id="cb4-27" title="27">LINE1:a#FFFF00FF:<span class="st">&quot;1. Target Traffic In&quot;</span> \</a>
<a class="sourceLine" id="cb4-28" title="28">GPRINT:a:LAST:<span class="st">&quot;      Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb4-29" title="29">GPRINT:a:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb4-30" title="30">GPRINT:b:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span> \</a>
<a class="sourceLine" id="cb4-31" title="31">LINE1:c#FFD660FF:<span class="st">&quot;2. Target Traffic In&quot;</span> \</a>
<a class="sourceLine" id="cb4-32" title="32">GPRINT:c:LAST:<span class="st">&quot;    Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb4-33" title="33">GPRINT:c:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb4-34" title="34">GPRINT:d:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span> \</a>
<a class="sourceLine" id="cb4-35" title="35">LINE1:e#CAF100FF:<span class="st">&quot;1. Target Traffic Out&quot;</span> \</a>
<a class="sourceLine" id="cb4-36" title="36">GPRINT:e:LAST:<span class="st">&quot;     Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb4-37" title="37">GPRINT:e:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb4-38" title="38">GPRINT:f:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span> \</a>
<a class="sourceLine" id="cb4-39" title="39">LINE1:g#CCBB00FF:<span class="st">&quot;2. Target Traffic Out&quot;</span> \</a>
<a class="sourceLine" id="cb4-40" title="40">GPRINT:g:LAST:<span class="st">&quot;   Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb4-41" title="41">GPRINT:g:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb4-42" title="42">GPRINT:h:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span> \</a>
<a class="sourceLine" id="cb4-43" title="43">LINE1:a#FF0000FF:<span class="st">&quot;1. Target Again Traffic In&quot;</span> \</a>
<a class="sourceLine" id="cb4-44" title="44">GPRINT:a:LAST:<span class="st">&quot;Current:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb4-45" title="45">GPRINT:a:AVERAGE:<span class="st">&quot;Average:%8.2lf%s&quot;</span> \</a>
<a class="sourceLine" id="cb4-46" title="46">GPRINT:b:MAX:<span class="st">&quot;Maximum:%8.2lf%sn&quot;</span> \</a>
<a class="sourceLine" id="cb4-47" title="47">LINE1:cdefca#000000FF:<span class="st">&quot;SimilarDsDups&quot;</span> \</a>
<a class="sourceLine" id="cb4-48" title="48">GPRINT:cdefca:LAST:Current:%8.2lf%s<span class="st">&quot; \</span></a>
<a class="sourceLine" id="cb4-49" title="49"><span class="st">GPRINT:cdefca:AVERAGE:&quot;</span>Average:%8.2lf%s<span class="st">&quot; \</span></a>
<a class="sourceLine" id="cb4-50" title="50"><span class="st">GPRINT:cdefcd:MAX:&quot;</span>Maximum:%8.2lf%sn<span class="st">&quot;</span></a></code></pre></div>
<p><code>cdefca</code> and <code>cdefcd</code> represents the important part. You surely notice, that all data sources using consolidation function AVERAGE are taken into account for calculation <code>cdefca</code>, while <code>MAX</code> is calculated with <code>cdefcd</code>. Please pay attention to the data source denoted by <code>a</code> and <code>b</code>, respectively, appearing twice in those CDEFs as expected.</p>
<h3 id="more-cdef-examples">More CDEF Examples</h3>
<p>This example is based on the standard data template <code>ucd/net - Hard Drive Space</code>. Cacti ships an associated graph template named <code>ucd/net - Available Disk Space</code>. Often, users complain about the fact, that this template prints free and used space as absolute figures only. But instead of knowing, that your data partition has about 10GB used space, you may be interested in the percentage used. So let's create a simple example to show the power of the recently introduced special data sources.</p>
<p>To make it work, we need two new CDEFs. The first one may come in useful for a bunch of different graph templates. It's named <code>Make Current Data Source 0</code>. On a first glance, you may wonder why this CDEF is needed. It is used for those data sources, that will be used for calculations but shall not show up themselves. Here's the definition</p>
<p><code>cdef=CURRENT_DATA_SOURCE,0,*</code></p>
<p>Now, the other one, named <code>Current DS as Percentage of all DS</code></p>
<p><code>cdef=CURRENT_DATA_SOURCE,ALL_DATA_SOURCES_NODUPS,/,100,*</code></p>
<p>Here's a short discussion. The first three elements read: Take the current data source and divide it by <code>Sum of All Data Sources (Don't include Duplicates)</code>. To form a percentage, you will have to multiply by 100. This is done by adding the elements four and five.</p>
<p>Now, let's build up the new graph</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Graph Item</th>
<th style="text-align: left;">Data Source</th>
<th style="text-align: right;">Graph Item Type</th>
<th style="text-align: right;">CF Type</th>
<th style="text-align: left;">Item Color</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Item # 1</td>
<td style="text-align: left;">(hdd_used):</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 2</td>
<td style="text-align: left;">(hdd_free):</td>
<td style="text-align: right;">LINE1</td>
<td style="text-align: right;">AVERAGE</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 3</td>
<td style="text-align: left;">(hdd_used): % Used</td>
<td style="text-align: right;">AREA</td>
<td style="text-align: right;">AVERAGE</td>
<td style="text-align: left;">FF0000</td>
</tr>
</tbody>
</table>
<p>Item numbers 1 and 2 in most cases will exceed the maximum percentage of 100 by magnitudes. So they are associated with the CDEF named <code>Make Current Data Source 0</code> to make them zero. This adds the data sources to the graph but avoids them showing up. The pseudo-color of <code>None</code> is associated to both of them.</p>
<p>Item number 3 is associated to the data source <code>hdd_used</code> as we want to print the <code>% Used</code> of the partition. The CDEF is <code>Current DS as Percentage of all DS</code>, the color is set to <code>red (FF0000)</code>.</p>
<p>And this is the rrd graph statement:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" title="1"><span class="ex">/usr/bin/rrdtool</span> graph - \</a>
<a class="sourceLine" id="cb5-2" title="2">--imgformat=PNG \</a>
<a class="sourceLine" id="cb5-3" title="3">--start=-86400 \</a>
<a class="sourceLine" id="cb5-4" title="4">--end=-300 \</a>
<a class="sourceLine" id="cb5-5" title="5">--title=<span class="st">&quot;gandalf - Disk Space - / %used&quot;</span> \</a>
<a class="sourceLine" id="cb5-6" title="6">--rigid \</a>
<a class="sourceLine" id="cb5-7" title="7">--base=1024 \</a>
<a class="sourceLine" id="cb5-8" title="8">--height=120 \</a>
<a class="sourceLine" id="cb5-9" title="9">--width=500 \</a>
<a class="sourceLine" id="cb5-10" title="10">--alt-autoscale-max \</a>
<a class="sourceLine" id="cb5-11" title="11">--lower-limit=0 \</a>
<a class="sourceLine" id="cb5-12" title="12">--vertical-label=<span class="st">&quot;Percent&quot;</span> \</a>
<a class="sourceLine" id="cb5-13" title="13">--slope-mode \</a>
<a class="sourceLine" id="cb5-14" title="14">--font TITLE:12: \</a>
<a class="sourceLine" id="cb5-15" title="15">--font AXIS:8: \</a>
<a class="sourceLine" id="cb5-16" title="16">--font LEGEND:8: \</a>
<a class="sourceLine" id="cb5-17" title="17">--font UNIT:8: \</a>
<a class="sourceLine" id="cb5-18" title="18">DEF:a=<span class="st">&quot;/var/www/html/cacti/rra/target1_hdd_free_236.rrd&quot;</span>:hdd_used:AVERAGE \</a>
<a class="sourceLine" id="cb5-19" title="19">DEF:b=<span class="st">&quot;/var/www/html/cacti/rra/target1_hdd_free_236.rrd&quot;</span>:hdd_free:AVERAGE \</a>
<a class="sourceLine" id="cb5-20" title="20">CDEF:cdefa=a,0,* \</a>
<a class="sourceLine" id="cb5-21" title="21">CDEF:cdefb=b,0,* \</a>
<a class="sourceLine" id="cb5-22" title="22">CDEF:cdefc=a,TIME,1203272123,GT,a,a,UN,0,a,IF,IF,TIME,1203272123,GT,b,b,UN,0,b,IF,IF,+,/,100,* \</a>
<a class="sourceLine" id="cb5-23" title="23">LINE1:cdefa:<span class="st">&quot;&quot;</span> \</a>
<a class="sourceLine" id="cb5-24" title="24">LINE1:cdefb:<span class="st">&quot;&quot;</span> \</a>
<a class="sourceLine" id="cb5-25" title="25">AREA:cdefc#FF0000FF:<span class="st">&quot;% Used&quot;</span></a></code></pre></div>
<p><code>cdefa</code> and <code>cdefb</code> are used to make the according graph items zero. <code>cdefc</code> performs the percentage calculation.</p>
<p>You may of course add <code>GPRINT</code> legends as usual. If you do this for the "% Used" entry only, you will get surprising results, if your RRDfile holds either <code>MAXIMUM</code>, <code>LAST</code> and/or <code>MINIMUM</code> consolidation function(s). This is left as an exercise to you :)</p>
<p>This set of CDEFs is used to colorize the background of a graph with different colors for day, night and weekends. The CDEFs are created as usual, we will show the CDEF definition only. Examples are taken from RRDtool-users mailing list courtesy Erik de Mare. Here are the definitions</p>
<h4 id="background-for-daytime">Background for Daytime</h4>
<p><code>cdef=LTIME,86400,%,28800,GT,LTIME,86400,%,64800,LT,INF,UNKN,CURRENT_DATA_SOURCE,*,IF,UNKN,CURRENT_DATA_SOURCE,*,IF</code></p>
<h4 id="background-for-nighttime">Background for Nighttime</h4>
<p>cdef=LTIME,86400,%,28800,LT,INF,LTIME,86400,%,64800,GT,INF,UNKN,CURRENT_DATA_SOURCE,*,IF,IF`</p>
<h4 id="background-for-weekend">Background for Weekend</h4>
<p><code>cdef=LTIME,604800,%,172800,GT,LTIME,604800,%,345600,LT,INF,UNKN,CURRENT_DATA_SOURCE,*,IF,UNKN,CURRENT_DATA_SOURCE,*,IF</code></p>
<p>The value of <code>86400</code> represents the number of seconds of a day, whereas <code>28800</code> represents <code>8:00</code>, defined as the start of the day. End of the day, <code>64800</code> is assumed at <code>18:00</code>. Please replace those values if required. For weekends, same logic applies.</p>
<p>Now, let's apply those new CDEFs to a Graph Template. For this example, I've chosen the <code>Unix - Processes</code> that applies to <code>localhost</code> only. In turn, please create three new graph items, associate the processes data source, make them AREAs, select a color and opacity. Choose the <code>daytime</code>, <code>nighttime</code> and <code>weekend</code> CDEF in this sequence. As a last step, move those three new graph items to the top. I've chosen opacity of <code>20%</code> for Item numbers 1 to 3.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Graph Item</th>
<th style="text-align: left;">Data Source</th>
<th style="text-align: right;">Graph Item Type</th>
<th style="text-align: right;">CF Type</th>
<th style="text-align: left;">Item Color</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Item # 1</td>
<td style="text-align: left;">(proc):</td>
<td style="text-align: right;">AREA</td>
<td style="text-align: right;">AVERAGE</td>
<td style="text-align: left;">FFFF00</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 2</td>
<td style="text-align: left;">(proc):</td>
<td style="text-align: right;">AREA</td>
<td style="text-align: right;">AVERAGE</td>
<td style="text-align: left;">0000FF</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 3</td>
<td style="text-align: left;">(proc):</td>
<td style="text-align: right;">AREA</td>
<td style="text-align: right;">AVERAGE</td>
<td style="text-align: left;">2E3127</td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 4</td>
<td style="text-align: left;">(proc): Running Processes</td>
<td style="text-align: right;">AREA</td>
<td style="text-align: right;">AVERAGE</td>
<td style="text-align: left;">F51D30</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 5</td>
<td style="text-align: left;">(proc): Current:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">LAST</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Item # 6</td>
<td style="text-align: left;">(proc): Average:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">AVERAGE</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Item # 7</td>
<td style="text-align: left;">(proc): Maximum:</td>
<td style="text-align: right;">GPRINT</td>
<td style="text-align: right;">MAX</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<hr />
<p><copy>Copyright (c) 2004-2023 The Cacti Group</copy></p>
</body>
</html>
